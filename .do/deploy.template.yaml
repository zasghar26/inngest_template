# .do/deploy.template.yaml
spec:
  name: inngest-dev
  services:
    - name: inngest-server
      image:
        registry_type: DOCR
        repository: htmxreg/inngest   # no ":latest" here
        digest: "sha256:d7e061d560ee921f58fd3a8a456f9b4830f074e7a5f2dc1ba7eb759987f8b3ee"                   # set tag here (or use `digest:`)
      http_port: 8288
      run_command: >-
        sh -lc 'inngest dev -u "${TARGET_URL}"'  # call the binary
      instance_size_slug: apps-d-2vcpu-4gb
      instance_count: 1
      routes:
        - path: /
      envs:
        - key: TARGET_URL
          scope: RUN_AND_BUILD_TIME
          value: ""
